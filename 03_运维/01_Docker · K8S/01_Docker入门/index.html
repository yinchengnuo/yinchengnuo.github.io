<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 入门 | 南山小站</title>
    <meta name="description" content="尹成诺的个人网站">
    <link rel="stylesheet" href="/assets/style.578a1be0.css">
    <link rel="modulepreload" href="/assets/app.ffde2a21.js">
    <link rel="modulepreload" href="/assets/03_运维_01_Docker · K8S_01_Docker入门_index.md.e9d1dd3d.lean.js">
    
    <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-b7788134><!--[--><!--]--><!--[--><span tabindex="-1" data-v-5bad87e6></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-5bad87e6> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b7788134 data-v-0f827909><div class="VPNavBar has-sidebar" data-v-0f827909 data-v-10058498><div class="container" data-v-10058498><div class="VPNavBarTitle has-sidebar" data-v-10058498 data-v-477b2930><a class="title" href="/" data-v-477b2930><!----><!--[-->小楼昨夜听风雨<!--]--></a></div><div class="content" data-v-10058498><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-10058498 data-v-1afc9dec><span id="main-nav-aria-label" class="visually-hidden" data-v-1afc9dec>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" data-v-1afc9dec data-v-1d8250a9 data-v-48abdd18><!--[-->首页<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-1afc9dec data-v-0635fb1f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-0635fb1f><span class="text" data-v-0635fb1f><!----> 我的应用 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-0635fb1f><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-0635fb1f><div class="VPMenu" data-v-0635fb1f data-v-e3d492a8><div class="items" data-v-e3d492a8><!--[--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/01_%E5%AF%8C%E8%81%8A/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->富聊<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/02_YAPI/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->YAPI<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/03_%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->图片压缩<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/04_%E7%89%A9%E6%B5%81%E6%9F%A5%E8%AF%A2/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->物流查询<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/05_%E8%B4%BA%E5%8D%A1%E5%88%B6%E4%BD%9C/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->贺卡制作<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/11_%E6%BB%9A%E5%8A%A8%E5%90%9B%E5%B0%8F%E7%A8%8B%E5%BA%8F/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->滚动君小程序<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/12_%E9%9D%92%E6%9F%A0%E7%9B%B4%E6%92%AD%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->青柠直播微信小程序<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/60_DEMO_Web@/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->DEMO_Web@<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/61_DEMO_%E6%94%BE%E5%A4%A7%E9%95%9C/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->DEMO_放大镜<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/66_DEMO_Web%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->DEMO_Web串口通信<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/00_%E6%88%91%E7%9A%84%E5%BA%94%E7%94%A8/67_DEMO_%E6%A8%A1%E7%B3%8A%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97%E9%AB%98%E4%BA%AE%E6%98%BE%E7%A4%BA/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->DEMO_模糊搜索关键字高亮显示<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-1afc9dec data-v-0635fb1f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-0635fb1f><span class="text" data-v-0635fb1f><!----> 前端 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-0635fb1f><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-0635fb1f><div class="VPMenu" data-v-0635fb1f data-v-e3d492a8><div class="items" data-v-e3d492a8><!--[--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/01_%E5%89%8D%E7%AB%AF/01_%E5%89%8D%E7%AB%AF%E6%9D%82%E8%B0%88/01_%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E9%81%93/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->前端杂谈<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/01_%E5%89%8D%E7%AB%AF/02_%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/01_Flutter%20%C2%B7%20ReactNative%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->前端框架<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/01_%E5%89%8D%E7%AB%AF/03_JS%20%C2%B7%20TS/01_JavaScript%E6%A8%A1%E5%9D%97%E5%8C%96%E7%AE%80%E5%8F%B2/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->JS · TS<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-1afc9dec data-v-0635fb1f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-0635fb1f><span class="text" data-v-0635fb1f><!----> 后端 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-0635fb1f><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-0635fb1f><div class="VPMenu" data-v-0635fb1f data-v-e3d492a8><div class="items" data-v-e3d492a8><!--[--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/02_%E5%90%8E%E7%AB%AF/01_NodeJS/01_module.exports%E4%B8%8Eexports%E7%9A%84%E5%8C%BA%E5%88%AB/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->NodeJS<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/02_%E5%90%8E%E7%AB%AF/02_Java/01_Java/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->Java<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-1afc9dec data-v-0635fb1f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-0635fb1f><span class="text" data-v-0635fb1f><!----> 运维 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-0635fb1f><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-0635fb1f><div class="VPMenu" data-v-0635fb1f data-v-e3d492a8><div class="items" data-v-e3d492a8><!--[--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link active" href="/03_%E8%BF%90%E7%BB%B4/01_Docker%20%C2%B7%20K8S/01_Docker%E5%85%A5%E9%97%A8/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->Docker · K8S<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/02_DevOps/01_DevOps%20%C2%B7%20CI%C2%B7CD/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->DevOps<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/03_%E8%BF%90%E7%BB%B4%E6%9D%82%E8%B0%88/01_!!!%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82IP%C2%B7%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%C2%B7%E7%BD%91%E5%85%B3%C2%B7DNS%C2%B7%E7%AB%AF%E5%8F%A3%C2%B7NAT%C2%B7DHCP/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->运维杂谈<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/04_Linux/01_Linux%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->Linux<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-1afc9dec data-v-0635fb1f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-0635fb1f><span class="text" data-v-0635fb1f><!----> 数据库 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-0635fb1f><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-0635fb1f><div class="VPMenu" data-v-0635fb1f data-v-e3d492a8><div class="items" data-v-e3d492a8><!--[--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/04_%E6%95%B0%E6%8D%AE%E5%BA%93/01_MySql/01_MySql/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->MySql<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="/04_%E6%95%B0%E6%8D%AE%E5%BA%93/02_MongoDB/01_MongoDB/index.html" data-v-44c3a200 data-v-48abdd18><!--[-->MongoDB<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-1afc9dec data-v-0635fb1f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-0635fb1f><span class="text" data-v-0635fb1f><!----> 工具 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-0635fb1f><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-0635fb1f><div class="VPMenu" data-v-0635fb1f data-v-e3d492a8><div class="items" data-v-e3d492a8><!--[--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->图片压缩<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://www.gaitubao.com/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->图片裁剪<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://tool.lu/favicon/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->图片生成ico<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://carbon.now.sh/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->代码导出为图片<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="http://www.websocket-test.com/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->WebSocket 在线测试<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-1afc9dec data-v-0635fb1f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-0635fb1f><span class="text" data-v-0635fb1f><!----> 文档 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-0635fb1f><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-0635fb1f><div class="VPMenu" data-v-0635fb1f data-v-e3d492a8><div class="items" data-v-e3d492a8><!--[--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://vitejs.cn/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->vite<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->vue<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://www.nginx.cn/doc/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->nginx<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://www.jenkins.io/zh/doc/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->jenkins<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://vitepress.vuejs.org/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->vitepress<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://www.runoob.com/markdown/md-tutorial.html" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->markdown<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e3d492a8 data-v-44c3a200><a class="VPLink link" href="https://letsencrypt.org/zh-cn/docs/certificates-for-localhost/" target="_blank" rel="noopener noreferrer" data-v-44c3a200 data-v-48abdd18><!--[-->localhost https 证书<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-48abdd18><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/05_%E5%85%B3%E4%BA%8E/index.html" data-v-1afc9dec data-v-1d8250a9 data-v-48abdd18><!--[-->关于<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-10058498 data-v-0b2f3bac><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-0b2f3bac data-v-741b6450 data-v-ab2de182><span class="check" data-v-ab2de182><span class="icon" data-v-ab2de182><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-741b6450><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-741b6450><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-10058498 data-v-5c5de4da data-v-7dcd7d60><!--[--><a class="VPSocialLink" href="https://github.com/yinchengnuo" title="github" target="_blank" rel="noopener noreferrer" data-v-7dcd7d60 data-v-610fed1a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-610fed1a><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-610fed1a>github</span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-10058498 data-v-5fe59986 data-v-0635fb1f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-0635fb1f><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-0635fb1f><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-0635fb1f><div class="VPMenu" data-v-0635fb1f data-v-e3d492a8><!----><!--[--><!--[--><!----><div class="group" data-v-5fe59986><div class="item appearance" data-v-5fe59986><p class="label" data-v-5fe59986>Appearance</p><div class="appearance-action" data-v-5fe59986><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-5fe59986 data-v-741b6450 data-v-ab2de182><span class="check" data-v-ab2de182><span class="icon" data-v-ab2de182><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-741b6450><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-741b6450><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-5fe59986><div class="item social-links" data-v-5fe59986><div class="VPSocialLinks social-links-list" data-v-5fe59986 data-v-7dcd7d60><!--[--><a class="VPSocialLink" href="https://github.com/yinchengnuo" title="github" target="_blank" rel="noopener noreferrer" data-v-7dcd7d60 data-v-610fed1a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-610fed1a><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-610fed1a>github</span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-10058498 data-v-2ead6e10><span class="container" data-v-2ead6e10><span class="top" data-v-2ead6e10></span><span class="middle" data-v-2ead6e10></span><span class="bottom" data-v-2ead6e10></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-b7788134 data-v-395172d0><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-395172d0><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-395172d0><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-395172d0>Menu</span></button><a class="top-link" href="#" data-v-395172d0> Return to top </a></div><aside class="VPSidebar" data-v-b7788134 data-v-edcb5950><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-edcb5950><span class="visually-hidden" id="sidebar-aria-label" data-v-edcb5950> Sidebar Navigation </span><!--[--><div class="group" data-v-edcb5950><section class="VPSidebarGroup collapsible" data-v-edcb5950 data-v-25699cea><div class="title" role="button" data-v-25699cea><h2 class="title-text" data-v-25699cea>Docker · K8S</h2><div class="action" data-v-25699cea><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-25699cea><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-25699cea><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-25699cea><!--[--><a class="VPLink link active" href="/03_%E8%BF%90%E7%BB%B4/01_Docker%20%C2%B7%20K8S/01_Docker%E5%85%A5%E9%97%A8/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>Docker入门</span><!--]--><!----></a><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/01_Docker%20%C2%B7%20K8S/02_!!!Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>!!!Docker常用命令</span><!--]--><!----></a><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/01_Docker%20%C2%B7%20K8S/03_%E5%AE%B9%E5%99%A8%E5%BA%94%E7%94%A8%E5%AE%89%E8%A3%85/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>容器应用安装</span><!--]--><!----></a><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/01_Docker%20%C2%B7%20K8S/04_!!!docker.sock%E6%8E%A2%E7%A9%B6/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>!!!docker.sock探究</span><!--]--><!----></a><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/01_Docker%20%C2%B7%20K8S/05_!!!Docker%E5%AE%B9%E5%99%A8%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9Avolume/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>!!!Docker容器动态绑定volume</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-edcb5950><section class="VPSidebarGroup collapsible" data-v-edcb5950 data-v-25699cea><div class="title" role="button" data-v-25699cea><h2 class="title-text" data-v-25699cea>DevOps</h2><div class="action" data-v-25699cea><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-25699cea><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-25699cea><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-25699cea><!--[--><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/02_DevOps/01_DevOps%20%C2%B7%20CI%C2%B7CD/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>DevOps · CI·CD</span><!--]--><!----></a><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/02_DevOps/02_Jenkins%E5%85%A5%E9%97%A8/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>Jenkins入门</span><!--]--><!----></a><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/02_DevOps/03_GitLab%E5%85%A5%E9%97%A8/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>GitLab入门</span><!--]--><!----></a><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/02_DevOps/04_Nginx%E5%85%A5%E9%97%A8/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>Nginx入门</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-edcb5950><section class="VPSidebarGroup collapsible" data-v-edcb5950 data-v-25699cea><div class="title" role="button" data-v-25699cea><h2 class="title-text" data-v-25699cea>运维杂谈</h2><div class="action" data-v-25699cea><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-25699cea><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-25699cea><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-25699cea><!--[--><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/03_%E8%BF%90%E7%BB%B4%E6%9D%82%E8%B0%88/01_!!!%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82IP%C2%B7%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%C2%B7%E7%BD%91%E5%85%B3%C2%B7DNS%C2%B7%E7%AB%AF%E5%8F%A3%C2%B7NAT%C2%B7DHCP/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>!!!一文搞懂IP·子网掩码·网关·DNS·端口·NAT·DHCP</span><!--]--><!----></a><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/03_%E8%BF%90%E7%BB%B4%E6%9D%82%E8%B0%88/02_!!!%E4%BB%80%E4%B9%88%E6%98%AF%E5%A5%97%E6%8E%A5%E5%AD%97/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>!!!什么是套接字</span><!--]--><!----></a><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/03_%E8%BF%90%E7%BB%B4%E6%9D%82%E8%B0%88/03_!!!TPS%E5%92%8CQPS/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>!!!TPS和QPS</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-edcb5950><section class="VPSidebarGroup collapsible" data-v-edcb5950 data-v-25699cea><div class="title" role="button" data-v-25699cea><h2 class="title-text" data-v-25699cea>Linux</h2><div class="action" data-v-25699cea><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-25699cea><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-25699cea><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-25699cea><!--[--><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/04_Linux/01_Linux%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>Linux命令大全</span><!--]--><!----></a><a class="VPLink link" href="/03_%E8%BF%90%E7%BB%B4/04_Linux/02_Linux%E4%BF%A1%E5%8F%B7%E9%9B%86/index.html" data-v-25699cea data-v-7bd8aee4 data-v-48abdd18><!--[--><span class="link-text" data-v-7bd8aee4>Linux信号集</span><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-b7788134 data-v-09411f0c><div class="VPDoc has-sidebar" data-v-09411f0c data-v-5200d57a><div class="container" data-v-5200d57a><div class="aside" data-v-5200d57a><div class="aside-curtain" data-v-5200d57a></div><div class="aside-container" data-v-5200d57a><div class="aside-content" data-v-5200d57a><div class="VPDocAside" data-v-5200d57a data-v-ab3cfea0><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-ab3cfea0 data-v-0adf76b1><div class="content" data-v-0adf76b1><div class="outline-marker" data-v-0adf76b1></div><div class="outline-title" data-v-0adf76b1>大纲</div><nav aria-labelledby="doc-outline-aria-label" data-v-0adf76b1><span class="visually-hidden" id="doc-outline-aria-label" data-v-0adf76b1> Table of Contents for current page </span><ul class="root" data-v-0adf76b1><!--[--><li style="" data-v-0adf76b1><a class="outline-link" href="#基础软件架构发展史" data-v-0adf76b1>基础软件架构发展史</a><!----></li><li style="" data-v-0adf76b1><a class="outline-link" href="#docker-与虚拟机" data-v-0adf76b1>Docker 与虚拟机</a><!----></li><li style="" data-v-0adf76b1><a class="outline-link" href="#docker-核心概念" data-v-0adf76b1>Docker 核心概念</a><!----></li><li style="" data-v-0adf76b1><a class="outline-link" href="#docker-安装运行" data-v-0adf76b1>Docker 安装运行</a><!----></li><li style="" data-v-0adf76b1><a class="outline-link" href="#docker-container" data-v-0adf76b1>Docker Container</a><!----></li><li style="" data-v-0adf76b1><a class="outline-link" href="#docker-image" data-v-0adf76b1>Docker Image</a><!----></li><li style="" data-v-0adf76b1><a class="outline-link" href="#docker-dockerfile" data-v-0adf76b1>Docker Dockerfile</a><!----></li><li style="" data-v-0adf76b1><a class="outline-link" href="#docker-volume" data-v-0adf76b1>Docker Volume</a><!----></li><li style="" data-v-0adf76b1><a class="outline-link" href="#docker-network" data-v-0adf76b1>Docker NetWork</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-ab3cfea0></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-5200d57a><div class="content-container" data-v-5200d57a><!--[--><!--]--><main class="main" data-v-5200d57a><div style="position:relative;" class="vp-doc _03_%E8%BF%90%E7%BB%B4_01_Docker%20%C2%B7%20K8S_01_Docker%E5%85%A5%E9%97%A8_index" data-v-5200d57a><div><h1 id="docker-入门" tabindex="-1">Docker 入门 <a class="header-anchor" href="#docker-入门" aria-hidden="true">#</a></h1><hr><p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可抑制的容器中，然后发布到任何流行的 Linux 机器上。</p><p>容器完全使用沙盒机制，相互之间不会存在任何接口。几乎没有性能开销，可以很容易的在机器和数据中心运行。最重要的是，他们不依赖于任何语言、框架或者包装系统。</p><h2 id="基础软件架构发展史" tabindex="-1">基础软件架构发展史 <a class="header-anchor" href="#基础软件架构发展史" aria-hidden="true">#</a></h2><p>为了更好的理解什么是 Docker，我们先来看一段简单的基础架构历史：</p><blockquote><ul><li>90 年代是传统服务器，在一些公司都会买小型机、塔式服务器、刀片式服务器，一个服务器上跑一个服务（一种应用），缺点是大量服务器资源被浪费；</li><li>2000 年开始流行虚拟化技术，代表是<code>VMware</code>和<code>VirtualBox</code>软件，在一个服务器上可以模拟出多台虚拟服务器，缺点是占有服务器资源较多，需要虚拟内存和 CPU，占有服务器大量资源；</li><li>2005 年-2015 年云技术 Cloud 开始流行，这个时候产生了很多大型云服务商，国际的有亚马逊、国内的阿里云，都是这个时期成长起来的公司。云技术也为容器技术提供了良好的生长土壤。</li><li>2015 年以后 Container（容器）时代，现在无论是国际还是国内大厂，无一例外的都在使用容器技术。那最为出名的就是<code>Docker</code>。</li></ul></blockquote><p>通过这段历史，你应该大概能够知道 Docker 是什么了。</p><h2 id="docker-与虚拟机" tabindex="-1">Docker 与虚拟机 <a class="header-anchor" href="#docker-与虚拟机" aria-hidden="true">#</a></h2><p>提到 <code>Docker</code>，就不得不提到虚拟机。</p><p>在容器技术之前，业界的网红是虚拟机。虚拟机技术的代表，是 VMWare 和 OpenStack。</p><p>相信很多人都用过虚拟机。虚拟机，就是在你的操作系统里面，装一个软件，然后通过这个软件，再模拟一台甚至多台“子电脑”出来。在“子电脑”里，你可以和正常电脑一样运行程序，例如开 QQ。如果你愿意，你可以变出好几个“子电脑”，里面都开上 QQ。“子电脑”和“子电脑”之间，是相互隔离的，互不影响。</p><p>虚拟机属于虚拟化技术。而 Docker 这样的容器技术，也是虚拟化技术，属于轻量级的虚拟化。</p><p>虚拟机虽然可以隔离出很多“子电脑”，但占用空间更大，启动更慢，虚拟机软件可能还要花钱（例如 VMWare）。</p><p>而容器技术恰好没有这些缺点。它不需要虚拟出整个操作系统，只需要虚拟一个小规模的环境（类似“沙箱”）。</p><p>它启动时间很快，几秒钟就能完成。而且，它对资源的利用率很高（一台主机可以同时运行几千个 Docker 容器）。此外，它占的空间很小，虚拟机一般要几 GB 到几十 GB 的空间，而容器只需要 MB 级甚至 KB 级。</p><p>简单的说就是：</p><blockquote><p>我们如果在一台物理服务器上只跑一个服务是浪费，而同时跑很多服务他们又互相影响，比如说一个服务出了内存泄漏把整个服务器的内存都占满了，其他服务都跟着倒霉。所以要把每个服务都隔离起来，让它们只使用自己那部分有限的 cpu，内存和磁盘，以及自己依赖的软件包。这个早先是用虚拟机来实现隔离的，但是每个虚拟机都要装自己的操作系统核心，这是对资源有点浪费。于是就有了 Docker, 一个机器上可以装十几个到上千个 docker，他们共享操作系统核心，占用资源少，启动速度快。但又能提供了资源（cpu, 内存，磁盘等）的一定程度的隔离。</p></blockquote><h2 id="docker-核心概念" tabindex="-1">Docker 核心概念 <a class="header-anchor" href="#docker-核心概念" aria-hidden="true">#</a></h2><h3 id="docker-镜像" tabindex="-1">Docker 镜像 <a class="header-anchor" href="#docker-镜像" aria-hidden="true">#</a></h3><p>Docker 镜像类似于虚拟机镜像，可以将它理解为一个只读的模板。</p><p>例如，一个镜像可以包含一个基本的操作系统环境，里面仅安装了 Apache 应用程序（或用户需要的其他软件）。可以把它称为一个 Apache 镜像。镜像是创建 Docker 容器的基础。通过版本管理和增量的文件系统，Docker 提供了一套十分简单的机制来创建和更新现有的镜像，用户甚至可以从网上下载一个已经做好的应用镜像，并直接使用。</p><h3 id="docker-容器" tabindex="-1">Docker 容器 <a class="header-anchor" href="#docker-容器" aria-hidden="true">#</a></h3><p>Docker 容器类似于一个轻量级的沙箱，Docker 利用容器来运行和隔离应用。容器是从镜像创建的应用运行实例。它可以启动、开始、停止、删除，而这些容器都是彼此相互隔离、互不可见的。可以吧容器看做一个简易版的 Linux 系统环境（包括 root 用户权限、进程空间、用户空间和网络空间等）以及运行在其中的应用程序打包而成的盒子。</p><p>注意：镜像自身是只读的。容器从镜像启动的时候，会在镜像的最上层创建一个可写层。</p><h3 id="docker-仓库" tabindex="-1">Docker 仓库 <a class="header-anchor" href="#docker-仓库" aria-hidden="true">#</a></h3><p>Docker 仓库类似于代码仓库，是 Docker 集中存放镜像文件的场所。从认识上来说，就好像软件包上传下载站，有各种软件的不同版本被上传供用户下载，共享和管理 Docker 镜像，官方地址为：<a href="https://registry.hub.docker.com/" target="_blank" rel="noopener noreferrer">https://registry.hub.docker.com/</a></p><h3 id="容器和镜像的区别" tabindex="-1">容器和镜像的区别 <a class="header-anchor" href="#容器和镜像的区别" aria-hidden="true">#</a></h3><blockquote><p>镜像像是一个包含了 OS 文件系统和应用的对象，类似虚拟机的模板（比如 Window10 镜像）。如果你是一个开发者，可以把镜像看成面向对象编程中的只读类(read-only Class)。</p></blockquote><blockquote><p>容器和镜像几乎一模一样，唯一的区别是镜像是只读的，而容器上面有一个可读写层。所以容器=镜像+读写层。</p></blockquote><h2 id="docker-安装运行" tabindex="-1">Docker 安装运行 <a class="header-anchor" href="#docker-安装运行" aria-hidden="true">#</a></h2><p>ps: 本文都所有的操作都是在 linux 环境</p><p>1、使用<code>curl</code>命令下载一个<code>sh</code>脚本</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl -fsSL get.docker.com -o get-docker.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、运行 Docker 安装脚本</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">sh get-docker.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3、启动 docker</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">systemctl start docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时安装一个 nginx 试一下：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container run -d -p 88:80 nginx</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>运行完成后执行：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl 127.0.0.1:88</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>即可看到：</p><div class="language-html line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Welcome to nginx!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">html</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        color-scheme</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> light dark</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">body</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">35em</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">margin</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> auto</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">font-family</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> Tahoma</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Verdana</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Arial</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> sans-serif</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Welcome to nginx!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">If you see this page, the nginx web server is successfully installed and working. Further configuration is required.</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      For online documentation and support please refer to </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://nginx.org/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">nginx.org</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">br</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      Commercial support is available at</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://nginx.com/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">nginx.com</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">em</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Thank you for using nginx.</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">em</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>此时，我们就使用 Docker 启动了一个 Nginx 服务器，通过浏览器 88 端口可以访问。</p><h2 id="docker-container" tabindex="-1">Docker Container <a class="header-anchor" href="#docker-container" aria-hidden="true">#</a></h2><h3 id="创建一个容器" tabindex="-1">创建一个容器 <a class="header-anchor" href="#创建一个容器" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container run </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> image name </span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>image 代表一个镜像的名称，比如上文中的 nginx。</p><p>当命令执行时，如果系统没有这个镜像，Docker 会自动去<code>Docker Hub</code>上拉取对应的镜像到本地，根据镜像创建容器。</p><blockquote><p>Docker Hub 是 Docker 官方的镜像和社区，里边有很多开发者制作好的镜像，我们可以直接使用这些镜像。如果你有能力，也可以制作镜像，并上传到 Docker Hub。</p></blockquote><p>注意，这时候容器是在前台运行的。</p><h3 id="查看容器的相关命令" tabindex="-1">查看容器的相关命令 <a class="header-anchor" href="#查看容器的相关命令" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container ls -a</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输入命令后，就会显示出当前已经存在的容器，并且会列出对应的信息。</p><blockquote><ul><li>CONTAINER ID : 容器对应的 ID，这个是唯一的</li><li>IMAGE : 使用的镜像名称，显示不同</li><li>COMMAND : 执行的相关命令</li><li>CREATED: 创建的时间</li><li>STATUS: 目前镜像的状态，一般会有两种状态 Up 和 Exited.</li><li>PORTS: 协议和端口</li><li>NAMES: 容器的名称，名字是 Docker 随机生成的</li></ul></blockquote><h3 id="停止容器的相关命令" tabindex="-1">停止容器的相关命令 <a class="header-anchor" href="#停止容器的相关命令" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container stop </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">name or ID</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="删除容器的相关命令" tabindex="-1">删除容器的相关命令 <a class="header-anchor" href="#删除容器的相关命令" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container rm </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">name or ID</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="attached-和-detached-模式" tabindex="-1">attached 和 detached 模式 <a class="header-anchor" href="#attached-和-detached-模式" aria-hidden="true">#</a></h3><p>两种模式最简单的对比理解就是：attached 模式在前台运行，detached 模式在后台运行。</p><p>attached 即 前台模式。在前台模式下（不指定-d 参数即可），Docker 会在容器中启动进程，同时将当前的命令行窗口附着到容器的标准输入、标准输出和标准错误中。也就是说容器中所有的输出都可以在当前窗口中看到。</p><p>detached 即后台模式。后台模式下所有 I/O 数据只能通过网络资源或者共享卷组来进行交互。因为容器不再监听你执行 docker run 的这个终端命令行窗口。但你可以通过执行 docker attach 来重新附着到该容器的会话中。</p><h3 id="detached-模式转换-attached-模式" tabindex="-1">detached 模式转换 attached 模式 <a class="header-anchor" href="#detached-模式转换-attached-模式" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker  attach </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">ID or Name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="detached-模式下查看-logs" tabindex="-1">detached 模式下查看 logs <a class="header-anchor" href="#detached-模式下查看-logs" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container logs </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">ID or Name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>虽然日志在窗口中出现了，但只打印一次 logs,如果想动态一直跟踪日志，可以在命令上加入一个 <code>-f</code>。</p><h3 id="container-的交互模式" tabindex="-1">container 的交互模式 <a class="header-anchor" href="#container-的交互模式" aria-hidden="true">#</a></h3><p>有时候容器的镜像不是简单的一个服务，而是需要交互的操作系统。例如创建一个 Ubuntu 系统，然后需要到系统里输入各种 Shell 命令和系统进行交互。这时候 attached 模式和 detached 模式就不能满足要求了。需要使用交互模式。</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container run -it ubuntu sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>-it</code>代表启用交互模式，<code>sh</code>代表可以使用 <code>Shell</code> 脚本。当你输入玩这个脚本后，Docker 就会进入到交互模式。可以使用<code>ls</code>来得到目录下的文件，也可以使用<code>hostname</code>来查看计算机名称。</p><p>这时候你想退出容器和交互模式可以输入<code>exit</code>命令。需要重点说明的是，随着命令退出后，容器也会跟着退出，变成 Exited 模式。</p><h3 id="detached-模式下的交互模式" tabindex="-1">detached 模式下的交互模式 <a class="header-anchor" href="#detached-模式下的交互模式" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">ID or Name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>exec</code>是执行的意思，<code>-it</code>交互模式 ， <code>sh</code>交互的方式，用<code>shell</code>脚本进行交互。整个命令的意思是：用 shell 脚本的方式执行交互模式。</p><p>这种模式的优点是，再使用 <code>exit</code> 退出后，服务并不会停止，而只是退出了交互模式。可以自己尝试一下退出，然后使用 <code>docker container ls -a</code> 来查看一下容器的状态，你会发现依然是 up 状态。</p><h2 id="docker-image" tabindex="-1">Docker Image <a class="header-anchor" href="#docker-image" aria-hidden="true">#</a></h2><p>上面我们说过，Docker image 是一个 read-only 文件，这个文件包含文件系统、源码、库文件、依赖等运行应用需要的文件，可以理解为一个模板。</p><h3 id="获取镜像的三个基本途径" tabindex="-1">获取镜像的三个基本途径 <a class="header-anchor" href="#获取镜像的三个基本途径" aria-hidden="true">#</a></h3><ul><li>从网络社区直接拉取，在 Docker 里这种社区叫做 Registry(登记处)的意思。（pull from registry）</li><li>从 Dockerfile 构建一个镜像，这种像是 DIY 一个镜像，但是整个构建过程是需要联网，因为需要西在基础镜像，然后根据基础镜像进行构建（build from Dockerfile）。</li><li>自有文件的导入，可以从本地导入已经构建好的镜像文件，在没有网络的时候可以用。这个文件是通过 已有的镜像导出来的压缩包，然后就可以进行使用了。</li></ul><p>总结：三种方法中最简单的是第一种，一条命令就可以完成。最复杂的是用 Dockerfile 进行构建，因为要写很多批处理命令 Shell，但这正式 Docker 的魅力所在，也是我们必须要掌握的。</p><h3 id="镜像社区的介绍" tabindex="-1">镜像社区的介绍 <a class="header-anchor" href="#镜像社区的介绍" aria-hidden="true">#</a></h3><p>镜像社区也叫做 Image registry（镜像登记处），是拉取和下载镜像的网站，你也可以通过 Dockerfile 制作镜像，让所有人使用，类似 Docker Image 专属的简单版 GitHub。</p><p>目前最流行的两个社区，一个是官方自己的另一个是红帽旗下的 <a href="http://Quay.io" target="_blank" rel="noopener noreferrer">Quay.io</a>。</p><p>dockerhub：<a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/</a> ,Docker 官方社区，在使用 Docker 时默认的拉取网站。</p><p>Quay：<a href="https://quay.io/" target="_blank" rel="noopener noreferrer">https://quay.io/</a> ，这个是 Liunx Red Hat （红帽）的旗下一个第三方 Docker 社区。</p><h3 id="镜像的拉取" tabindex="-1">镜像的拉取 <a class="header-anchor" href="#镜像的拉取" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker image pull node</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>从 <a href="http://Quay.io" target="_blank" rel="noopener noreferrer">Quay.io</a> 上拉取镜像</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker pull quay.io/calico/node</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="镜像的查看" tabindex="-1">镜像的查看 <a class="header-anchor" href="#镜像的查看" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker image ls</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="镜像的删除" tabindex="-1">镜像的删除 <a class="header-anchor" href="#镜像的删除" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker image rm </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Image ID</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>需要注意的是，当有容器在使用镜像时，是没有办法被删除的。即使容器是停止掉的，依然是没办法删除的。</p><h3 id="镜像的导出" tabindex="-1">镜像的导出 <a class="header-anchor" href="#镜像的导出" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker image save busybox:latest -o mybusybox.image</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>save</code>是导出/保存的意思，<code>busybox:latest</code>是镜像名称+版本号， <code>-o</code>代表输出，<code>mybusybox.image</code>是导出后镜像的名字。</p><p>命令执行完成后，可以看到在执行命令所在的目录下就会多出一个<code>mybusybox.image</code>的文件，这就是刚才导出的镜像了。</p><h3 id="镜像的导入" tabindex="-1">镜像的导入 <a class="header-anchor" href="#镜像的导入" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker image load -i .\mybusybox.image</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="docker-dockerfile" tabindex="-1">Docker Dockerfile <a class="header-anchor" href="#docker-dockerfile" aria-hidden="true">#</a></h2><p>Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。</p><p>可以简单总结为下面三点：</p><ul><li>Dockerfile 是用于构建 docker 镜像的文件</li><li>Dockerfile 里包含了构建镜像所需的”指令“</li><li>Dockerfile 有其特定的语法规则（重要学习）</li></ul><h3 id="为什么需要-dockerfile" tabindex="-1">为什么需要 Dockerfile <a class="header-anchor" href="#为什么需要-dockerfile" aria-hidden="true">#</a></h3><blockquote><p>问题: 在 dockerhub 中官方提供很多镜像已经能满足我们的所有服务了,为什么还需要自定义镜像</p><p>核心作用:日后用户可以将自己应用打包成镜像,这样就可以让我们应用进行容器运行.还可以对官方镜像做扩展，以打包成我们生产应用的镜像。</p></blockquote><h3 id="dockerfile-的格式" tabindex="-1">Dockerfile 的格式 <a class="header-anchor" href="#dockerfile-的格式" aria-hidden="true">#</a></h3><p>两种类型的行</p><ul><li>以# 开头的注释行</li><li>由专用“指令（Instruction）”开头的指令行</li></ul><p>由 Image Builder 顺序执行各指令，从而完成 Image 构建。</p><p>下面以定制一个 nginx 镜像（构建好的镜像内会有一个 /usr/share/nginx/html/index.html 文件）为示例展开讲解。</p><p>在一个空目录下，新建一个名为 Dockerfile 文件，并在文件内添加以下内容：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">FROM nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">RUN </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">这是一个本地构建的nginx镜像</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> /usr/share/nginx/html/index.html</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>FROM</code>：定制的镜像都是基于 FROM 的镜像，这里的 nginx 就是定制需要的基础镜像。后续的操作都是基于 nginx。</p><p><code>RUN</code>：用于执行后面跟着的命令行命令。有以下俩种格式：</p><p>shell 格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">RUN </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">命令行命令</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># &lt;命令行命令&gt; 等同于，在终端操作的 shell 命令。</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>exec 格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">RUN </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">可执行文件</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">参数1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">参数2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 例如：</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># RUN [&quot;./test.php&quot;, &quot;dev&quot;, &quot;offline&quot;] 等价于 RUN ./test.php dev offline</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注意：Dockerfile 的指令每执行一次都会在 docker 上新建一层。所以过多无意义的层，会造成镜像膨胀过大。例如：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">FROM centos</span></span>
<span class="line"><span style="color:#A6ACCD;">RUN yum -y install wget</span></span>
<span class="line"><span style="color:#A6ACCD;">RUN wget -O redis.tar.gz </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://download.redis.io/releases/redis-5.0.3.tar.gz</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">RUN tar -xvf redis.tar.gz</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>以上执行会创建 3 层镜像。可简化为以下格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">FROM centos</span></span>
<span class="line"><span style="color:#A6ACCD;">RUN yum -y install wget \</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> wget -O redis.tar.gz </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://download.redis.io/releases/redis-5.0.3.tar.gz</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> tar -xvf redis.tar.gz</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如上，以 &amp;&amp; 符号连接命令，这样执行后，只会创建 1 层镜像。</p><h3 id="构建镜像" tabindex="-1">构建镜像 <a class="header-anchor" href="#构建镜像" aria-hidden="true">#</a></h3><p>在 Dockerfile 文件的存放目录下，执行构建动作。</p><p>以下示例，通过目录下的 Dockerfile 构建一个 nginx:v3（镜像名称:镜像标签）。</p><p>注：最后的 . 代表本次执行的上下文路径</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker build -t nginx:v3 </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="指令详解" tabindex="-1">指令详解 <a class="header-anchor" href="#指令详解" aria-hidden="true">#</a></h3><h4 id="copy" tabindex="-1">COPY <a class="header-anchor" href="#copy" aria-hidden="true">#</a></h4><p>复制指令，从上下文目录中复制文件或者目录到容器里指定路径。</p><p>格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">COPY </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">--chown</span><span style="color:#89DDFF;">=&lt;</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">group</span><span style="color:#89DDFF;">&gt;]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">源路径</span><span style="color:#89DDFF;">1&gt;</span><span style="color:#A6ACCD;">...  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">目标路径</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">COPY </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">--chown</span><span style="color:#89DDFF;">=&lt;</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">group</span><span style="color:#89DDFF;">&gt;]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;源路径1&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,...  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;目标路径&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>[--chown=&lt;user&gt;:&lt;group&gt;]：可选参数，用户改变复制到容器内文件的拥有者和属组。</p><p>&lt;源路径&gt;：源文件或者源目录，这里可以是通配符表达式，其通配符规则要满足 Go 的 filepath.Match 规则。例如：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">COPY hom</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> /mydir/</span></span>
<span class="line"><span style="color:#A6ACCD;">COPY hom</span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;">.txt /mydir/</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>&lt;目标路径&gt;：容器内的指定路径，该路径不用事先建好，路径不存在的话，会自动创建。</p><h4 id="add" tabindex="-1">ADD <a class="header-anchor" href="#add" aria-hidden="true">#</a></h4><p>ADD 指令和 COPY 的使用格类似（同样需求下，官方推荐使用 COPY）。功能也类似，不同之处如下：</p><ul><li>ADD 的优点：在执行 &lt;源文件&gt; 为 tar 压缩文件的话，压缩格式为 gzip, bzip2 以及 xz 的情况下，会自动复制并解压到 &lt;目标路径&gt;。</li><li>ADD 的缺点：在不解压的前提下，无法复制 tar 压缩文件。会令镜像构建缓存失效，从而可能会令镜像构建变得比较缓慢。具体是否使用，可以根据是否需要自动解压来决定。</li></ul><h4 id="cmd" tabindex="-1">CMD <a class="header-anchor" href="#cmd" aria-hidden="true">#</a></h4><p>类似于 RUN 指令，用于运行程序，但二者运行的时间点不同:</p><ul><li>CMD 在 docker run 时运行。</li><li>RUN 是在 docker build。</li></ul><p>作用：为启动的容器指定默认要运行的程序，程序运行结束，容器也就结束。CMD 指令指定的程序可被 docker run 命令行参数中指定要运行的程序所覆盖。</p><p>注意：如果 Dockerfile 中如果存在多个 CMD 指令，仅最后一个生效。</p><p>格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">CMD </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">shell 命令</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">CMD </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;可执行文件或命令&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;param1&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;param2&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">CMD </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;param1&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;param2&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,...</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 该写法是为 ENTRYPOINT 指令指定的程序提供默认参数</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>推荐使用第二种格式，执行过程比较明确。第一种格式实际上在运行的过程中也会自动转换成第二种格式运行，并且默认可执行文件是 sh。</p><h4 id="entrypoint" tabindex="-1">ENTRYPOINT <a class="header-anchor" href="#entrypoint" aria-hidden="true">#</a></h4><p>类似于 CMD 指令，但其不会被 docker run 的命令行参数指定的指令所覆盖，而且这些命令行参数会被当作参数送给 ENTRYPOINT 指令指定的程序。</p><p>但是, 如果运行 docker run 时使用了 --entrypoint 选项，将覆盖 ENTRYPOINT 指令指定的程序。</p><p>优点：在执行 docker run 的时候可以指定 ENTRYPOINT 运行所需的参数。</p><p>注意：如果 Dockerfile 中如果存在多个 ENTRYPOINT 指令，仅最后一个生效。</p><p>格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ENTRYPOINT </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;executeable&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;param1&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;param2&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以搭配 CMD 命令使用：一般是变参才会使用 CMD ，这里的 CMD 等于是在给 ENTRYPOINT 传参，以下示例会提到。</p><p>示例：</p><p>假设已通过 Dockerfile 构建了 nginx:test 镜像：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">FROM nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ENTRYPOINT </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">nginx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-c</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 定参</span></span>
<span class="line"><span style="color:#A6ACCD;">CMD </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/etc/nginx/nginx.conf</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 变参</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>1、不传参运行</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run  nginx:test</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>容器内会默认运行以下命令，启动主进程。</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">nginx -c /etc/nginx/nginx.conf</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、传参运行</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run  nginx:test -c /etc/nginx/new.conf</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>容器内会默认运行以下命令，启动主进程(/etc/nginx/new.conf:假设容器内已有此文件)</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">nginx -c /etc/nginx/new.conf</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="env" tabindex="-1">ENV <a class="header-anchor" href="#env" aria-hidden="true">#</a></h4><p>设置环境变量，定义了环境变量，那么在后续的指令中，就可以使用这个环境变量。</p><p>格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ENV </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">ENV </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">1&gt;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">1&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">2&gt;</span><span style="color:#A6ACCD;">=</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">2&gt;</span><span style="color:#A6ACCD;">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>以下示例设置 NODE_VERSION = 7.2.0 ， 在后续的指令中可以通过 $NODE_VERSION 引用：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ENV NODE_VERSION 7.2.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">RUN curl -SLO </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://nodejs.org/dist/v</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">NODE_VERSION</span><span style="color:#C3E88D;">/node-v</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">NODE_VERSION</span><span style="color:#C3E88D;">-linux-x64.tar.xz</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> curl -SLO </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://nodejs.org/dist/v</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">NODE_VERSION</span><span style="color:#C3E88D;">/SHASUMS256.txt.asc</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="arg" tabindex="-1">ARG <a class="header-anchor" href="#arg" aria-hidden="true">#</a></h4><p>构建参数，与 ENV 作用一致。不过作用域不一样。ARG 设置的环境变量仅对 Dockerfile 内有效，也就是说只有 docker build 的过程中有效，构建好的镜像内不存在此环境变量。</p><p>构建命令 docker build 中可以用 --build-arg &lt;参数名&gt;=&lt;值&gt; 来覆盖。</p><p>格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ARG </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">参数名</span><span style="color:#89DDFF;">&gt;[=&lt;</span><span style="color:#A6ACCD;">默认值</span><span style="color:#89DDFF;">&gt;]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="volume" tabindex="-1">VOLUME <a class="header-anchor" href="#volume" aria-hidden="true">#</a></h4><p>定义匿名数据卷。在启动容器时忘记挂载数据卷，会自动挂载到匿名卷。</p><p>作用：</p><ul><li>避免重要的数据，因容器重启而丢失，这是非常致命的。</li><li>避免容器不断变大。</li></ul><p>格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">VOLUME </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;路径1&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;路径2&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">VOLUME </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">路径</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在启动容器 docker run 的时候，我们可以通过 -v 参数修改挂载点。</p><h4 id="expose" tabindex="-1">EXPOSE <a class="header-anchor" href="#expose" aria-hidden="true">#</a></h4><p>仅仅只是声明端口。</p><p>作用：</p><p>帮助镜像使用者理解这个镜像服务的守护端口，以方便配置映射。</p><p>在运行时使用随机端口映射时，也就是 docker run -P 时，会自动随机映射 EXPOSE 的端口。</p><p>格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">EXPOSE </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">端口</span><span style="color:#89DDFF;">1&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[&lt;</span><span style="color:#A6ACCD;">端口</span><span style="color:#89DDFF;">2&gt;</span><span style="color:#A6ACCD;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="workdir" tabindex="-1">WORKDIR <a class="header-anchor" href="#workdir" aria-hidden="true">#</a></h4><p>指定工作目录。用 WORKDIR 指定的工作目录，会在构建镜像的每一层中都存在。（WORKDIR 指定的工作目录，必须是提前创建好的）。</p><p>docker build 构建镜像过程中的，每一个 RUN 命令都是新建的一层。只有通过 WORKDIR 创建的目录才会一直存在。</p><p>格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">WORKDIR </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">工作目录路径</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="user" tabindex="-1">USER <a class="header-anchor" href="#user" aria-hidden="true">#</a></h4><p>用于指定执行后续命令的用户和用户组，这边只是切换后续命令执行的用户（用户和用户组必须提前已经存在）。</p><p>格式：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">USER </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">用户名</span><span style="color:#89DDFF;">&gt;[</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">用户组</span><span style="color:#89DDFF;">&gt;]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="docker-volume" tabindex="-1">Docker Volume <a class="header-anchor" href="#docker-volume" aria-hidden="true">#</a></h2><p>默认情况下，在运行中的容器里创建的文件，被保存在一个可写的容器层：</p><ul><li>如果容器被删除了，则数据也没有了</li><li>这个可写的容器层是和特定的容器绑定的，也就是这些数据无法方便的和其它容器共享</li></ul><p>Docker 主要提供了两种方式做数据的持久化</p><ul><li>Data Volume, 由 Docker 管理，(/var/lib/docker/volumes/ Linux), 持久化数据的最好方式</li><li>Bind Mount，由用户指定存储的数据具体 mount 在系统什么位置</li></ul><h3 id="不能持久化的案例演示" tabindex="-1">不能持久化的案例演示 <a class="header-anchor" href="#不能持久化的案例演示" aria-hidden="true">#</a></h3><p>对比的学习效果最好，所以这里先操作一个不能持久化的案例。当我们了解问题后，再学习持久化就更容易理解和重视。先运行一个官方的 Ngix 的容器。</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container run -d nginx</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>服务运行后，用下面的命令进入交互模式:</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;">  -it </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Container ID</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后我们在 <code>/app</code> 目录创建一个 <code>test</code> 目录</p><p>如果此时我们退出交互模式并停止容器最后删除容器后，我们新建的 test 目录就消失了。</p><h3 id="volume-命令实现持久化操作" tabindex="-1">VOLUME 命令实现持久化操作 <a class="header-anchor" href="#volume-命令实现持久化操作" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container run -d -v /app nginx</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时我们在 <code>/app</code> 目录创建一个 <code>test</code> 目录，删除容器后文件夹依然存在。那这些持久化的数据被保存到了那里哪？这就需要我们再学习一下<code>docker volume</code>的相关命令了。</p><h3 id="docker-volume-相关命令" tabindex="-1">docker volume 相关命令 <a class="header-anchor" href="#docker-volume-相关命令" aria-hidden="true">#</a></h3><p>现在退出容器，来到主系统当中，可以输入下面的命令,就可以看到 docker volume 相关的命令了。</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># docker volume</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Usage:  docker volume COMMAND</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Manage volumes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Commands:</span></span>
<span class="line"><span style="color:#A6ACCD;">  create      Create a volume</span></span>
<span class="line"><span style="color:#A6ACCD;">  inspect     Display detailed information on one or more volumes</span></span>
<span class="line"><span style="color:#A6ACCD;">  ls          List volumes</span></span>
<span class="line"><span style="color:#A6ACCD;">  prune       Remove all unused </span><span style="color:#C792EA;">local</span><span style="color:#A6ACCD;"> volumes</span></span>
<span class="line"><span style="color:#A6ACCD;">  rm          Remove one or more volumes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Run </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">docker volume COMMAND --help</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> more information on a command.</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>可以用 <code>docker volume ls</code> 查看所有的持久化空间，最主要的是可以看到存储空间的 ID。</p><p>有了 ID 之后，使用下面的命令，可以查看到持久化的具体地址。</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># docker volume ls</span></span>
<span class="line"><span style="color:#A6ACCD;">DRIVER    VOLUME NAME</span></span>
<span class="line"><span style="color:#C792EA;">local</span><span style="color:#A6ACCD;">     202028fdcadfb2e76309cd9fa7ce767e8c1e6612a974d51ba2ccff90df59c656</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># docker volume inspect 202028fdcadfb2e76309cd9fa7ce767e8c1e6612a974d51ba2ccff90df59c656</span></span>
<span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CreatedAt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2022-08-06T15:33:29+08:00</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Driver</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">local</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Labels</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Mountpoint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/lib/docker/volumes/202028fdcadfb2e76309cd9fa7ce767e8c1e6612a974d51ba2ccff90df59c656/_data</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">202028fdcadfb2e76309cd9fa7ce767e8c1e6612a974d51ba2ccff90df59c656</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Options</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Scope</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">local</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>其中的 Mountpoint 就是持久化的地址，复制这个地址，然后用 cd 命令进入后就能看到我们创建的 test 目录了。</p><p>通过上面的学习，你已经会把容器（container）中的数据和文件，保存在操作系统上了。现在的需求是，再创建一个容器，新容器如何用我们之前用 volume 保存下来的的持久化数据？</p><h3 id="使用具名-volume-实现复用" tabindex="-1">使用具名 volume 实现复用 <a class="header-anchor" href="#使用具名-volume-实现复用" aria-hidden="true">#</a></h3><p>还是启动一个 nginx，同时加上名称：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># docker container run -d -v my_nginx:/app nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">641eb11eea39eb253b23bd1d9b212de55bf2c484e4375ace7192faf10affda25</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># docker volume ls</span></span>
<span class="line"><span style="color:#A6ACCD;">DRIVER    VOLUME NAME</span></span>
<span class="line"><span style="color:#C792EA;">local</span><span style="color:#A6ACCD;">     20e96ab6798c7cc70d79ea6dc2595093c0fbb7ad0e5cde74a562b346f0ef8d88</span></span>
<span class="line"><span style="color:#C792EA;">local</span><span style="color:#A6ACCD;">     my_nginx</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># docker volume inspect my_nginx</span></span>
<span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CreatedAt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2022-08-06T15:50:03+08:00</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Driver</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">local</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Labels</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Mountpoint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/lib/docker/volumes/my_nginx/_data</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my_nginx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Options</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Scope</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">local</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># cd /var/lib/docker/volumes/my_nginx/_data</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># mkdir my_nginx_test</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># docker container exec -it 641 sh</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># cd /app</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ls</span></span>
<span class="line"><span style="color:#A6ACCD;">my_nginx_test</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># exit</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>当我们使用具名 volume 运行容器后，我们可以通过名称找到持久化所在的位置，在外部对持久化目录做的修改会映射到容器内部。</p><p>此时我们如果删除容器，使用上面的方式重新创建一个容器，数据仍然存在，这时候就实现了数据持久化：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># docker container rm 641 -f</span></span>
<span class="line"><span style="color:#A6ACCD;">641</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># docker container run -d -v my_nginx:/app nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">fcd49f7525f7a498e72b25b56a11fff2508b8cd863d262aa957fc181ce1474f4</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># docker container exec -it fcd sh</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># cd /app</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ls</span></span>
<span class="line"><span style="color:#A6ACCD;">my_nginx_test</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># exit</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="bind-mount-实现数据持久化" tabindex="-1">Bind Mount 实现数据持久化 <a class="header-anchor" href="#bind-mount-实现数据持久化" aria-hidden="true">#</a></h3><p>数据持久化除了上面讲的 Data Volume 外，还有一种叫做 Bind Mount，从中文翻译来讲，就是挂载绑定。简单讲就是把容器中持久化的数据，绑定到本机的一个自定义位置。</p><p>bind mount 是将主机上的目录或文件 mount 到容器里。</p><p>使用直观高效，易于理解。</p><p>使用-v 选项指定挂载路径，格式 host_path:container_path : 前面是宿主机真实存在的路径 :后面是容器内的路径</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 后台运行一个使用nginx镜像的容器并将宿主机的/data目录挂载到容器的目录/usr/share/nginx/html下</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># docker run -d --name demo -v /data:/usr/share/nginx/html nginx</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在宿主机操作 /data 目录或在容器内操作 /usr/share/nginx/html 目录会相互映射。这里不再重复演示。</p><h3 id="多个机器之间的容器共享数据" tabindex="-1">多个机器之间的容器共享数据 <a class="header-anchor" href="#多个机器之间的容器共享数据" aria-hidden="true">#</a></h3><p>官方参考链接 <a href="https://docs.docker.com/storage/volumes/#share-data-among-machines" target="_blank" rel="noopener noreferrer">https://docs.docker.com/storage/volumes/#share-data-among-machines</a></p><h2 id="docker-network" tabindex="-1">Docker NetWork <a class="header-anchor" href="#docker-network" aria-hidden="true">#</a></h2><p>一台服务器上可以跑很多容器，容器间是相互配合运行的。有配合就需要有网络通讯，就需要设置网络。</p><p>比如现在我们启动一个 nginx 的容器，用 detached 模式启动，并映射端口到 8888 上。</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container run -d -p 8888:80 nginx</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>容器启动后，可以用查看容器的具体信息。命令如下。</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container inspect </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Container ID </span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输入完成后，你可以看到有很多信息。其中有一项是 Networks，这个就是容器的网路设置了：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Networks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bridge</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IPAMConfig</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Links</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Aliases</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">NetworkID</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">d93ef70843f3885fca96ce8d00c8953d7849f3560de49dfac07501823b5658a9</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">EndpointID</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e8924969dfc8d45519619b1013a26194c77b11a9da66e6ad2f9768b670873888</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Gateway</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">172.17.0.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IPAddress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">172.17.0.4</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IPPrefixLen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: 16,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IPv6Gateway</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GlobalIPv6Address</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GlobalIPv6PrefixLen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: 0,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">MacAddress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">02:42:ac:11:00:04</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DriverOpts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>信息中是可以看出很多东西的，比如这个网络的连接方式是 bridge，也就是桥接。然后 IP 地址 IPAddress 是 <code>172.17.0.4</code> 这个就是它的内网 IP 地址。</p><p>为了看的更清晰，我们可以再启动一个 nginx 容器.</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container run -d -p 8889:80 nginx</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个容器的 network 信息为：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Networks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bridge</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IPAMConfig</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Links</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Aliases</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">NetworkID</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">d93ef70843f3885fca96ce8d00c8953d7849f3560de49dfac07501823b5658a9</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">EndpointID</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2df423cafc17d39476ffc294ae863015ed5c0864429a56d4a44b153bda302646</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Gateway</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">172.17.0.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IPAddress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">172.17.0.5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IPPrefixLen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: 16,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IPv6Gateway</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GlobalIPv6Address</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GlobalIPv6PrefixLen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: 0,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">MacAddress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">02:42:ac:11:00:05</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DriverOpts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: null</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>此时，这个容器的 IP 地址变成了 <code>172.17.0.5</code></p><p>也就是说每一个容器启动后都会有一个 IP，并且每个 IP 是不同，自动变化的。这就是 Docker 为我们作的默认网络配置。并且虽然容器的启动顺畅，给的 IP 地址也是递增的。</p><p>这种默认的问题就是，如果每次启动的顺序不一样，IP 地址就会不同，这样每次都要重新进行配置。这肯定在工作中是行不通的。真实工作中，可能一台服务器就有几十个容器，如果每次修改通讯地址，这个工作将变的混乱不堪，无法继续。</p><p>那一般情况下，我们会通过 --name 来置顶固定名称，然后再用名称进行通信。这种解决方案的前提就是需要了解网络模式和自定义网络后，才能实现可控状态。</p><h4 id="查看所有-docker-的网络列表" tabindex="-1">查看所有 Docker 的网络列表 <a class="header-anchor" href="#查看所有-docker-的网络列表" aria-hidden="true">#</a></h4><p>可以使用下面的命令进行查看主机上已经有的网络配置列表：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker network ls</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>docker 默认有 3 种网络模式：</p><ul><li>bridge ： 这个是网关模式。在这个模式下，Docker 会为每一个容器分配、设置 IP 等，并将容器连接到一个 docker0 虚拟网关，默认为该模式。</li><li>host ：使用主机模式，容器没有 IP 和网关这些，都是用实体主机的。容器将不会虚拟出自己的网卡，配置自己的 IP 等，而是使用宿主机的 IP 和端口。</li><li>none ：就是不创建自己的 IP 网络。也就是常说的没有网，当然你可以自己进行定义网络模式。容器有独立的 Network namespace，但并没有对其继续任何网络设置，如分配 veth pair 和网桥连接，IP 等。</li></ul><p>还有一种 container 模式，就是利用其它容器的网络，别的容器有网络了，使用其它的容器网络。新创建的容器不会创建自己的网卡和配置自己的 IP，而是和一个指定的容器共享 IP、端口等。此种方式不是默认网络模式，它需要基于另一个容器。</p><h4 id="bridge-网络模式" tabindex="-1">bridge 网络模式 <a class="header-anchor" href="#bridge-网络模式" aria-hidden="true">#</a></h4><p>在该模式中，Docker 守护进程创建了一个虚拟以太网桥 docker 0,新建的容器会自动桥接到这个接口，附加在其上的任何网卡之间都能自动转发数据包。</p><p>如上面的 <code>172.17.0.5</code> 和 <code>172.17.0.4</code> 可以互相通信。因为所有 bridge 模式的容器共享同一个网关 <code>172.17.0.1</code>，这个网关就是 docker0。</p><p>我们可以测试下通信。还是刚刚的那两个容器，我们将 IP 为 <code>172.17.0.5</code> 的容器命名为 <code>ip5</code>。将 IP 为 <code>172.17.0.4</code> 的容器命名为 <code>ip4</code>。</p><p>修改容器内容：</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it ip5 sh -c </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">echo ip5 &gt; /usr/share/nginx/html/index.html</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker container </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it ip4 sh -c </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">echo ip4 &gt; /usr/share/nginx/html/index.html</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时在 ip5 容器请求 ip4:</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># docker container exec ip5 curl 172.17.0.4</span></span>
<span class="line"><span style="color:#A6ACCD;">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span></span>
<span class="line"><span style="color:#A6ACCD;">                                 Dload  Upload   Total   Spent    Left  Speed</span></span>
<span class="line"><span style="color:#A6ACCD;">100     4  100     4    0     0   4000      0 --:--:-- --:--:-- --:--:--  4000</span></span>
<span class="line"><span style="color:#A6ACCD;">ip4</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="host-模式" tabindex="-1">host 模式 <a class="header-anchor" href="#host-模式" aria-hidden="true">#</a></h4><p>host 网络模式使用主机网络模式，容器没有 IP 和网关这些，都是用实体主机的。容器将不会虚拟出自己的网卡，配置自己的 IP 等，而是使用宿主机的 IP 和端口。采用 host 网络模式的 Docker Container，可以直接使用主机的 IP 地址与外界进行通信，若主机的 eth0 是一个共有 IP，那么容器有用这个共有 IP。同时容器内服务的端口也可以使用端口，无需额外进行 NAT 转换。</p><div class="language-sh line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -it --name nginx1 --network host nginx</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="none-网络模式" tabindex="-1">none 网络模式 <a class="header-anchor" href="#none-网络模式" aria-hidden="true">#</a></h4><p>none 网络模式是指禁用网络功能，只有 <code>lo</code> 接口 <code>local</code> 的简写，代表 <code>127.0.0.1</code>,即 <code>localhost</code> 本地环回接口。在创建容器时通过 <code>-- net none</code> 或者 <code>--network none</code> 指定。</p><p><code>none</code> 网络模式即不为容器创建任何的网络环境，容器内部只能使用 loopback 网络设备，不会再有其他的网络资源。可以说 none 模式为容器做了极少的网络设定，但是俗话说的好“少即是多”。在没有网络配置的情况下，作为 Docker 开发者，才能在这基础做其他无限多的可能的网络定制开发。这也体现了 Docker 设计理念的开发。</p><h4 id="container-网络模式" tabindex="-1">container 网络模式 <a class="header-anchor" href="#container-网络模式" aria-hidden="true">#</a></h4><p>Container 网络模式是 Docker 中一种较为特别的网络模式。在创建时通过参数 <code>-- net container</code> : 已运行的网络名称 | ID 或者 <code>-- network container</code> : 已运行的容器名称 | ID 指定。处于这个模式下的 Docker 容器会共享一个网络栈，这样两个容器之间可以使用 localhost 高效通信。Container 网络模式即新创建的容器不会创建自己的网卡，配置自己的 IP，而是和一个指定的容器共享 IP、端口范围等。同样两个容器除了网络方面相同之外，其他的如文件系统、进程列表等还是隔离的。</p></div></div></main><footer class="VPDocFooter" data-v-5200d57a data-v-dd53704a><div class="edit-info" data-v-dd53704a><div class="edit-link" data-v-dd53704a><a class="VPLink link edit-link-button" href="https://github.com/yinchengnuo/yinchengnuo.com/blob/master/03_运维/01_Docker · K8S/01_Docker入门/index.md" target="_blank" rel="noopener noreferrer" data-v-dd53704a data-v-48abdd18><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-dd53704a><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 在 GitHub 上编辑此页面<!--]--><!----></a></div><!----></div><div class="prev-next" data-v-dd53704a><div class="pager" data-v-dd53704a><!----></div><div class="pager" data-v-dd53704a><a class="pager-link next" href="/03_%E8%BF%90%E7%BB%B4/01_Docker%20%C2%B7%20K8S/02_!!!Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/index.html" data-v-dd53704a><span class="desc" data-v-dd53704a>Next page</span><span class="title" data-v-dd53704a>!!!Docker常用命令</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"00_我的应用_01_富聊_index.md\":\"ac8c4135\",\"00_我的应用_02_yapi_index.md\":\"838cfc79\",\"00_我的应用_03_图片压缩_index.md\":\"a0512cc4\",\"00_我的应用_04_物流查询_index.md\":\"31122602\",\"00_我的应用_05_贺卡制作_index.md\":\"872ad55b\",\"00_我的应用_11_滚动君小程序_index.md\":\"0dc55123\",\"00_我的应用_12_青柠直播微信小程序_index.md\":\"362c1b7c\",\"00_我的应用_60_demo_web@_index.md\":\"5e10e7d7\",\"00_我的应用_61_demo_放大镜_index.md\":\"ec9cd191\",\"00_我的应用_66_demo_web串口通信_index.md\":\"e36fda73\",\"00_我的应用_67_demo_模糊搜索关键字高亮显示_index.md\":\"c82f50e8\",\"01_前端_01_前端杂谈_01_前端代码规范之道_index.md\":\"87f6b5be\",\"01_前端_01_前端杂谈_02_前端项目处理用户设备缩放_index.md\":\"6dbe16e7\",\"01_前端_01_前端杂谈_03_!!!深入chrome devtools_index.md\":\"468a6b8d\",\"01_前端_01_前端杂谈_04_!!!伪元素样式动态修改_index.md\":\"86616d3c\",\"01_前端_01_前端杂谈_05_!!!cssom操作实践_index.md\":\"b35bdeb0\",\"01_前端_01_前端杂谈_06_浏览器的进程与线程_index.md\":\"6839a119\",\"01_前端_01_前端杂谈_08_web串口通信_index.md\":\"08fc20f1\",\"01_前端_01_前端杂谈_09_前端构建工具vite入门_index.md\":\"60178e33\",\"01_前端_01_前端杂谈_10_!!!前端实现@功能_index.md\":\"61eff91f\",\"01_前端_01_前端杂谈_11_!!!什么是dsl_index.md\":\"56ffba11\",\"01_前端_01_前端杂谈_12_!!!前端处理视频流的探索_index.md\":\"79a745aa\",\"01_前端_01_前端杂谈_13_!!!前端图片压缩_index.md\":\"2746be19\",\"01_前端_01_前端杂谈_14_!!!你不知道的flex_index.md\":\"2bb76ce0\",\"01_前端_01_前端杂谈_15_!!!前端dom生成图片_index.md\":\"360dec39\",\"01_前端_01_前端杂谈_16_!!!前端光标·拖蓝·焦点管理_index.md\":\"f603abd2\",\"01_前端_01_前端杂谈_17_!!!微前端隔离原理_index.md\":\"bc8092c3\",\"01_前端_01_前端杂谈_18_企业私有npm搭建及使用_index.md\":\"72b65dae\",\"01_前端_02_前端框架_01_flutter · reactnative技术对比_index.md\":\"4dff1fab\",\"01_前端_02_前端框架_02_electron入门_index.md\":\"87c96ee4\",\"01_前端_02_前端框架_03_electron项目集成_index.md\":\"c480232b\",\"01_前端_02_前端框架_04_electron自动更新_index.md\":\"db6ccc4c\",\"01_前端_02_前端框架_05_electron静默打印_index.md\":\"790f79c9\",\"01_前端_02_前端框架_06_electron串口通信_index.md\":\"a3519ffb\",\"01_前端_02_前端框架_07_electron进程通信_index.md\":\"f361622e\",\"01_前端_02_前端框架_08_electron打包优化_index.md\":\"201b3e3b\",\"01_前端_02_前端框架_09_electron本地存储_index.md\":\"eb4ce86e\",\"01_前端_02_前端框架_10_electron系统交互_index.md\":\"7c33724d\",\"01_前端_02_前端框架_11_electron无感更新_index.md\":\"4ba0b7dc\",\"01_前端_02_前端框架_12_electron构建部署_index.md\":\"0c3e9783\",\"01_前端_03_js · ts_01_javascript模块化简史_index.md\":\"11a6bcd9\",\"01_前端_03_js · ts_02_javascript中的super_index.md\":\"f4230c43\",\"01_前端_03_js · ts_03_!!!为什么不能用sort实现数组乱序_index.md\":\"fae7558f\",\"01_前端_03_js · ts_04_!!!es6 proxy 为什么要用 reflect_index.md\":\"397e6b1a\",\"02_后端_01_nodejs_01_module.exports与exports的区别_index.md\":\"4732e69e\",\"02_后端_01_nodejs_02_nodejs中的console_index.md\":\"672fc8cc\",\"02_后端_01_nodejs_03_nodejs负载均衡_index.md\":\"9fdd88d9\",\"02_后端_02_java_01_java_index.md\":\"94cce050\",\"03_运维_01_docker · k8s_01_docker入门_index.md\":\"e9d1dd3d\",\"03_运维_01_docker · k8s_02_!!!docker常用命令_index.md\":\"29e9f7ba\",\"03_运维_01_docker · k8s_03_容器应用安装_index.md\":\"74ff2e90\",\"03_运维_01_docker · k8s_04_!!!docker.sock探究_index.md\":\"0ba8f0c7\",\"03_运维_01_docker · k8s_05_!!!docker容器动态绑定volume_index.md\":\"c1c360ba\",\"03_运维_02_devops_01_devops · ci·cd_index.md\":\"8c0288d9\",\"03_运维_02_devops_02_jenkins入门_index.md\":\"b7fcb498\",\"03_运维_02_devops_03_gitlab入门_index.md\":\"a3f65c04\",\"03_运维_02_devops_04_nginx入门_index.md\":\"200b183e\",\"03_运维_03_运维杂谈_01_!!!一文搞懂ip·子网掩码·网关·dns·端口·nat·dhcp_index.md\":\"e7ace7a6\",\"03_运维_03_运维杂谈_02_!!!什么是套接字_index.md\":\"90a7879b\",\"03_运维_03_运维杂谈_03_!!!tps和qps_index.md\":\"339303f4\",\"03_运维_04_linux_01_linux命令大全_index.md\":\"ad527bf8\",\"03_运维_04_linux_02_linux信号集_index.md\":\"da696c1d\",\"04_数据库_01_mysql_01_mysql_index.md\":\"e4090d2e\",\"04_数据库_02_mongodb_01_mongodb_index.md\":\"eb5dcbc1\",\"05_关于_index.md\":\"10a2e7af\",\"readme.md\":\"d95b9940\",\"index.md\":\"526a8957\"}")</script>
    <script type="module" async src="/assets/app.ffde2a21.js"></script>
    
  </body>
</html>